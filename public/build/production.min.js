function addDirections(){var a=$("#recipe-directions").val();a=a.trim(),""!=a&&($("#directions-list").append("<li><span>"+a+'</span> <a class="directions-delete" href="#"><i class="glyphicon glyphicon-remove"></i></a> <a class="directions-edit" href="#"><i class="glyphicon glyphicon-pencil"></i></a>'),registerNewListItemDirections(),setDirectionsInput(),$("#recipe-directions").val(""))}function registerNewListItemDirections(){$(".directions-delete").click(function(a){a.preventDefault();var b=$(this).parent();deleteDirectionHelper(),deleteDirections(b),appendDirectionHelper(),$("#recipe-directions").focus()}),$(".directions-edit").click(function(a){a.preventDefault();var b=$(this).parent();deleteDirectionHelper(),editDirections(b),appendDirectionHelper(),$("#recipe-directions").focus()})}function deleteDirections(a){$(a).remove(),setDirectionsInput()}function editDirections(a){var b=a.find("span").text();$(a).remove(),setDirectionsInput(),$("#recipe-directions").val(b)}function setDirectionsInput(){var a="";$("#directions-list span").each(function(){""==a?a=$(this).text():a+="<>"+$(this).text()}),$("#directions").val(a)}function appendDirectionHelper(){$("#directions-list").append('<li class="helper"><span></span>'),updateDirectionHelper()}function deleteDirectionHelper(){$("#directions-list .helper").remove()}function updateDirectionHelper(){var a=$("#recipe-directions").val();""==a?($("#directions-list .helper span").text(""),$("#directions-list .helper").hide()):($("#directions-list .helper").show(),$("#directions-list .helper span").text(a))}function isValidQuantity(a){if(!isNaN(a))return!0;var b=/^(\d+\s)?\d+\/\d+$/;return b.test(a)?!0:!1}function addIngredient(){var a=$("#recipe-quantity").val(),b=$("#recipe-quantity-type").val(),c=$("#recipe-ingredient").val();if(""!=a&&""!=c&&isValidQuantity(a)){var d=a+" "+b+" "+c;$("#ingredient-list").append("<li><span>"+d+'</span> <a class="ingredient-delete" href="#"><i class="glyphicon glyphicon-remove"></i></a> <a class="ingredient-edit" href="#"><i class="glyphicon glyphicon-pencil"></i></a>'),registerNewListItem(),setIngredientInput(),$("#recipe-quantity").val(""),$("#recipe-ingredient").val("")}}function registerNewListItem(){$(".ingredient-delete").click(function(a){a.preventDefault();var b=$(this).parent();deleteIngredientHelper(),deleteIngredient(b),appendIngredientHelper(),$("#recipe-quantity").focus()}),$(".ingredient-edit").click(function(a){a.preventDefault();var b=$(this).parent();deleteIngredientHelper(),editIngredient(b),appendIngredientHelper(),$("#recipe-quantity").focus()})}function deleteIngredient(a){$(a).remove(),setIngredientInput()}function editIngredient(a){var b=a.find("span").text(),c=[];$("#recipe-quantity-type option").each(function(a){c[a]=$(this).val()});for(var d,e,f,g=100,h=0;h<c.length;h++)b.indexOf(c[h])>-1&&b.indexOf(c[h])<g&&(g=b.indexOf(c[h]),f=h);d=g,e=c[f].length;var i=b.slice(0,d-1),j=b.substr(d,e),k=b.slice(d+e+1);$(a).remove(),setIngredientInput(),$("#recipe-quantity").val(i),$("#recipe-quantity-type").val(j),$("#recipe-ingredient").val(k)}function setIngredientInput(){var a="";$("#ingredient-list span").each(function(){""==a?a=$(this).text():a+="<>"+$(this).text()}),console.log(a),$("#ingredients").val(a)}function appendIngredientHelper(){$("#ingredient-list").append('<li class="helper"><span></span>'),updateIngredientHelper()}function deleteIngredientHelper(){$("#ingredient-list .helper").remove()}function updateIngredientHelper(){var a=$("#recipe-quantity").val(),b=$("#recipe-quantity-type").val(),c=$("#recipe-ingredient").val(),d=a+" "+b+" "+c;""==a&&""==c?($("#ingredient-list .helper span").text(""),$("#ingredient-list .helper").hide()):($("#ingredient-list .helper").show(),$("#ingredient-list .helper span").text(d))}function textCounter(a,b,c){var d=document.getElementById(b);return console.log(d.value),a.value.length>c?(a.value=a.value.substring(0,c),!1):void(d.innerHTML=c-a.value.length)}$(function(){$("#directions-list").sortable({items:"li:not(.helper)",handle:".directions-move",cursor:"move"}),$("#directions-list").on("sortupdate",function(a,b){deleteDirectionHelper(),setDirectionsInput(),appendDirectionHelper()}),registerNewListItemDirections(),appendDirectionHelper()}),$("#recipe-directions").bind("keypress keydown keyup",function(a){13==a.keyCode&&(a.preventDefault(),deleteDirectionHelper(),addDirections(),appendDirectionHelper(),$("#recipe-directions").focus())}),$("#recipe-directions").on("change keyup paste blur",function(){updateDirectionHelper()}),$("#add-directions").click(function(a){a.preventDefault(),deleteDirectionHelper(),addDirections(),appendDirectionHelper(),$("#recipe-directions").focus()}),$(function(){$("#recipe-quantity").tooltip({trigger:"manual"}),$("#recipe-quantity").on("change keyup paste blur",function(){var a=$(this).val();isValidQuantity(a)?$(this).tooltip("hide"):$(this).tooltip("show")}),$("#recipe-quantity, #recipe-quantity-type, #recipe-ingredient").on("change keyup paste blur",function(){updateIngredientHelper()}),registerNewListItem(),appendIngredientHelper()}),$(function(){$("#ingredient-list").sortable({handle:".ingredients-move",cursor:"move"}),$("#ingredient-list").on("sortupdate",function(a,b){deleteIngredientHelper(),setIngredientInput(),appendIngredientHelper()}),registerNewListItem()}),$("#add-ingredient").click(function(a){a.preventDefault(),deleteIngredientHelper(),addIngredient(),appendIngredientHelper(),$("#recipe-quantity").focus()}),$("#recipe-ingredient, #recipe-quantity").bind("keypress keydown keyup",function(a){13==a.keyCode&&(a.preventDefault(),deleteIngredientHelper(),addIngredient(),appendIngredientHelper(),$("#recipe-quantity").focus())}),$(".dropzone").html5imageupload({}),$(".review-text").readmore({embedCSS:!1,collapsedHeight:40,moreLink:'<a class="more" href="#">Read more</a>',lessLink:'<a class="more" href="#">Close</a>'}),$(".subscriber_count").click(function(){var a=this,b=$(a).data("slug"),c=$(a).find("button");if($(a).hasClass("saved")){var d="http://discovercooks.com/cookbook/removeRecipe/"+b;$.ajax({url:d}).done(function(){var b=parseInt($(a).find(".num").text())-1;$(a).find(".num").text(b),$(a).removeClass("saved"),$(a).find("save-button").text("Save"),c.addClass("btn-success").removeClass("btn-danger"),c.text("Save Recipe")})}else{var d="http://discovercooks.com/cookbook/addRecipe/"+b;$.ajax({url:d}).done(function(){var b=parseInt($(a).find(".num").text())+1;$(a).find(".num").text(b),$(a).addClass("saved"),$(a).find("save-button").text("Saved"),c.addClass("btn-danger").removeClass("btn-success"),c.text("Saved")})}}),$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top-120},500),!1}})});